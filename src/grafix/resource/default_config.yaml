# どこで: grafix パッケージ同梱の既定設定。
# 何を: runtime_config が常に読み込むベース設定。
# なぜ: 使えるキー一覧を可視化し、既定値の真実を 1 箇所に集約するため。

version: 1

paths:
  # 出力ファイルの保存先（ParamStore / SVG / PNG / video / MIDI スナップショット等）。
  output_dir: "data/output"

  # ユーザースクリプト（例: sketch/）のルートディレクトリ。
  # 指定した場合、出力ディレクトリ内で同様のサブディレクトリ構造にミラーする。
  sketch_dir: "sketch"

  # ユーザー定義 preset モジュール格納ディレクトリ（複数可）。
  # `P.<name>(...)` の初回アクセス時に、各ディレクトリ配下の `*.py` を再帰的に自動 import して登録する。
  preset_module_dirs: []

  # 外部フォント探索ディレクトリ（存在しない場合は無視される）。
  font_dirs:
    - "data/input/font"

ui:
  # ウィンドウ配置（ピクセル）。
  window_positions:
    draw: [25, 25]
    parameter_gui: [950, 25]

  # Parameter GUI ウィンドウサイズ（ピクセル）。
  parameter_gui:
    window_size: [800, 1000]
    # GUI の基準フォントサイズ（px）。Retina 等では backing scale に応じて自動で倍率される。
    font_size_base_px: 12.0
    # GUI の日本語表示用フォールバックフォント（ファイル名 / パス / 部分一致）。
    # 未指定（null/空）なら自動選択（例: Hiragino Sans GB → NotoSansJP）。
    fallback_font_japanese: null
    # Parameter テーブルの列幅（stretch 比率）。
    # (label, control, min-max, cc/meta)
    table_column_weights: [0.20, 0.60, 0.15, 0.20]

export:
  # PNG 変換のスケール倍率（canvas_size に対するピクセル倍率）。
  png:
    scale: 8.0

  # G-code 出力（ペンプロッタ/3D プリンタ系）設定。
  gcode:
    # ペンアップ移動のフィードレート [mm/min]。
    travel_feed: 3000.0
    # ペンダウン描画のフィードレート [mm/min]。
    draw_feed: 3000.0

    # ペンアップ/ダウンの Z 高さ [mm]。
    z_up: 3.0
    z_down: -1.0

    # True の場合、Y 反転を行う（canvas の感覚を左上原点の Y 下向きに寄せる）。
    y_down: true

    # 出力座標の原点オフセット [mm]（X, Y）。
    origin: [154.019, 14.195]

    # 数値出力の小数点以下の桁数。
    decimals: 3

    # 紙（canvas）の外周安全マージン [mm]。
    paper_margin_mm: 2.0

    # 3D プリンタのベッド X/Y 範囲 [mm]（範囲外の出力は例外）。
    # null の場合は無効。
    bed_x_range: null
    bed_y_range: null

    # ストローク間の移動距離がこの値より小さければ、ペンアップを省略して描画で繋ぐ。
    # null の場合は無効。
    bridge_draw_distance: 0.5

    # True の場合、レイヤ内でストローク順を並び替えてペンアップ移動距離を小さくする。
    optimize_travel: true
    # `optimize_travel=true` の場合、ストロークの逆向き描画を許可する。
    allow_reverse: true

    # `y_down=true` 時の厳密反転に使うキャンバス高さ [mm]（未指定なら export_gcode(canvas_size=...) の高さ）。
    canvas_height_mm: null

midi:
  # `run(..., midi_port_name="auto")` のときに上から順に接続を試す。
  # port_name が利用可能ならそのポートへ接続する。
  # port_name="auto" は「利用可能な入力ポートの 1 つ目」を意味する。
  inputs: []
